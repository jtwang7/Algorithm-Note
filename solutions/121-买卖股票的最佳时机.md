[121. 买卖股票的最佳时机](https://leetcode-cn.com/problems/best-time-to-buy-and-sell-stock/description/)

# 题解
Tag: 动态规划

## 思路
动态规划的一般解题步骤 -- 动规五部曲：
1. 确定dp数组（dp table）以及下标的含义
2. 确定动规递推公式
3. 初始化动规初始值
4. 确定遍历顺序
5. 举例推导，验证 dp 数组的正确性

本题的动规五部曲如下：
1. 确定dp数组（dp table）以及下标的含义
dp[i][0]：第i天之前(包括第i天)持有股票时所能获得的最大利润
dp[i][1]：第i天之前(包括第i天)未持有股票时所能获得的最大利润

2. 确定递推公式：
递推 dp[i][0] 的两个方向：第i天持有股票的情况：1.第i-1天持有股票，今天未卖 2.第i天刚买入股票
递推 dp[i][1] 的两个方向：第i天未持有股票的情况：1.第i-1天持有股票，今天卖了 2.第i-1天就已经将股票卖了

3. dp数组如何初始化
从递推公式可以看出来dp[i]是依赖于dp[i - 1]的状态，dp[0]就是递推公式的基础。
第0天，持有股票，总资产为负。dp[0][0] = -prices[0];
第0天，未买股票，资产为0。dp[0][1] = 0; 

4. 确定遍历顺序
递推公式中dp[i]依赖于dp[i - 1]的状态，需要从前向后遍历。

5. 举例推导dp数组


## 代码
```js
/**
 * @param {number[]} prices
 * @return {number}
 */
var maxProfit = function(prices) {
  // 创建动规二维数组
  const dp = Array.from({length: prices.length}, () => new Array(2).fill(0));

  // 动规初始化
  // dp[i][0] - 第i天之前(包括第i天)持有股票时所能获得的最大利润
  // dp[i][1] - 第i天之前(包括第i天)未持有股票时所能获得的最大利润
  dp[0][0] = -prices[0]; // 第0天，持有股票，总资产为负
  dp[0][1] = 0; // 第0天，未买股票，资产为0
  for (let i=1; i<prices.length; i++) {
    dp[i][0] = Math.max(dp[i-1][0], -prices[i]); // 第i天持有股票的情况可从两方向递推得到：1.第i-1天持有股票，今天未卖 2.第i天刚买入股票
    dp[i][1] = Math.max(dp[i-1][0] + prices[i], dp[i-1][1]); // 第i天未持有股票的情况可从两方向递推得到：1.第i-1天持有股票，今天卖了 2.第i-1天就已经将股票卖了
  }

  return dp[prices.length - 1][1]; // 截止最后一天的最大利润必然是未持有股票的状态
};
```